<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Print Price Calculator</title>
    <script>
        function calculatePrice() {
            // Get user inputs
            let materialCost = parseFloat(document.getElementById("materialCost").value);
            let weight = parseFloat(document.getElementById("weight").value);
            let printTime = parseFloat(document.getElementById("printTime").value);
            let packaging = parseFloat(document.getElementById("packaging").value);
            let profitMultiplier = parseFloat(document.getElementById("profitMargin").value);
            let hasPostProcessing = document.getElementById("postProcess").checked;
            let postProcessingTime = hasPostProcessing ? parseFloat(document.getElementById("postTime").value) : 0;
            let includeShopify = document.getElementById("shopifyFee").checked;
            let includeVAT = document.getElementById("vatFee").checked;

            // Constants
            let failureRate = 0.10;  // 10% extra material cost
            let maintenanceCost = 0.7;  // AED per hour
            let electricityRate = 0.0075;  // AED per kWh
            let laborCost = 40 / 60;  // AED per minute
            let shopifyMultiplier = includeShopify ? 1.044 : 1;  // Apply Shopify fee if checked
            let vatMultiplier = includeVAT ? 1.05 : 1;  // Apply VAT if checked

            // Calculate costs
            let materialTotal = (weight / 1000) * materialCost * (1 + failureRate);
            let machineCost = printTime * maintenanceCost;
            let electricityCost = printTime * electricityRate;
            let postProcessingCost = postProcessingTime * laborCost;
            
            let totalCost = materialTotal + machineCost + electricityCost + postProcessingCost + packaging;
            let finalPrice = totalCost * profitMultiplier * shopifyMultiplier * vatMultiplier;

            // Display result
            document.getElementById("result").innerHTML = "Selling Price: " + finalPrice.toFixed(2) + " AED";
        }

        function togglePostProcessing() {
            document.getElementById("postProcessingTime").style.display = document.getElementById("postProcess").checked ? "block" : "none";
        }
    </script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 400px; margin: auto; }
        h2, h3 { color: #333; text-align: center; }
        label { font-weight: bold; display: block; margin-top: 10px; }
        input, select, button { width: 100%; padding: 10px; margin-top: 5px; font-size: 16px; }
        button { background-color: #007BFF; color: white; border: none; cursor: pointer; margin-top: 15px; }
        button:hover { background-color: #0056b3; }
        .checkbox-group { display: flex; justify-content: space-between; margin-top: 10px; }
        .checkbox-group label { font-weight: normal; font-size: 14px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 14px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>
    <h2>3D Print Price Calculator</h2>
    
    <label>Material Cost (AED/kg):</label>
    <input type="number" id="materialCost" value="100">

    <label>Weight (g):</label>
    <input type="number" id="weight" value="50">

    <label>Print Time (hours):</label>
    <input type="number" id="printTime" value="2">

    <label>Packaging Cost (AED):</label>
    <select id="packaging">
        <option value="2">Small - 2 AED</option>
        <option value="3">Medium - 3 AED</option>
        <option value="5">Large - 5 AED</option>
        <option value="10">XL - 10 AED</option>
    </select>

    <label>Profit Margin:</label>
    <select id="profitMargin">
        <option value="1.3">30%</option>
        <option value="1.4">40%</option>
        <option value="1.5">50%</option>
        <option value="1.6" selected>60%</option>
    </select>

    <input type="checkbox" id="postProcess" onclick="togglePostProcessing()"> <label>Include Post-Processing?</label>
    
    <div id="postProcessingTime" style="display:none;">
        <label>Post-Processing Time (minutes):</label>
        <input type="number" id="postTime" value="10">
    </div>

    <div class="checkbox-group">
        <label><input type="checkbox" id="shopifyFee"> Include Shopify Fee (4.4%)</label>
        <label><input type="checkbox" id="vatFee"> Include VAT (5%)</label>
    </div>

    <button onclick="calculatePrice()">Calculate</button>

    <h3 id="result">Selling Price: -- AED</h3>

    <!-- Reference Table with Constants -->
    <h3>Pricing Factors & Constants</h3>
    <table>
        <tr>
            <th>Factor</th>
            <th>Value</th>
        </tr>
        <tr>
            <td>Material Failure Coverage</td>
            <td>10% extra material cost</td>
        </tr>
        <tr>
            <td>Machine Maintenance Cost</td>
            <td>0.7 AED per hour</td>
        </tr>
        <tr>
            <td>Electricity Cost</td>
            <td>7.5 fils (0.0075 AED) per kWh</td>
        </tr>
        <tr>
            <td>Labor Cost</td>
            <td>40 AED per hour (0.67 AED per minute)</td>
        </tr>
        <tr>
            <td>Profit Margin</td>
            <td>30%-60% (User selects)</td>
        </tr>
        <tr>
            <td>Shopify Transaction Fee</td>
            <td>4.4% (Optional)</td>
        </tr>
        <tr>
            <td>VAT</td>
            <td>5% (Optional)</td>
        </tr>
        <tr>
            <td>Packaging Fees</td>
            <td>Small: 2 AED, Medium: 3 AED, Large: 5 AED, XL: 10 AED</td>
        </tr>
    </table>
</body>
</html>
